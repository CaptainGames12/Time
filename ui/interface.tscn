[gd_scene load_steps=37 format=3 uid="uid://bykkx8hfl6i86"]

[ext_resource type="PackedScene" uid="uid://7kfpfr1fhuh5" path="res://wizard/player_ui/control.tscn" id="1_rm747"]
[ext_resource type="PackedScene" uid="uid://dmrk7fnn3wb0j" path="res://wizard/player_ui/Healthbar.tscn" id="2_2t7gn"]
[ext_resource type="PackedScene" uid="uid://byyvwanp7uc17" path="res://rooms/main/level_progress.tscn" id="3_gtcda"]
[ext_resource type="PackedScene" uid="uid://cbvctbxxv3rvi" path="res://enemies/forest/boss/boss_health.tscn" id="4_i3j0c"]
[ext_resource type="FontFile" uid="uid://bpp82k7v8e671" path="res://shopping/PixelatedEleganceRegular-ovyAA.ttf" id="5_goa6t"]
[ext_resource type="Texture2D" uid="uid://boevfpikbod4w" path="res://ui/UI(1)/button_5.png" id="6_js8hj"]
[ext_resource type="Texture2D" uid="uid://b7tkddthyqmt0" path="res://ui/dark_button_version/button_5_dark.png" id="7_o5cqe"]
[ext_resource type="Texture2D" path="res://ui/normal_restart.png" id="8_g8vcq"]
[ext_resource type="Texture2D" path="res://ui/pressed_restart.png" id="9_apw32"]
[ext_resource type="Texture2D" uid="uid://b50pkbhw6s04u" path="res://wizard/menu_clock.png" id="10_1uikj"]
[ext_resource type="Script" uid="uid://du3wrllvswb2p" path="res://wizard/clock.gd" id="11_suxck"]
[ext_resource type="AudioStream" uid="uid://soev4p3d33nf" path="res://wizard/tick.mp3" id="12_q7sjo"]
[ext_resource type="PackedScene" uid="uid://xd5fsmhf0pj7" path="res://ui/time_stop_btn.tscn" id="13_0potx"]
[ext_resource type="Texture2D" uid="uid://clwqfbsh7uifu" path="res://ui/UI(1)/button_4.png" id="14_38x65"]
[ext_resource type="Texture2D" uid="uid://4q1uxalbnk7b" path="res://ui/dark_button_version/button_4_dark.png" id="15_dywsh"]
[ext_resource type="PackedScene" uid="uid://bu4x1lrdy0xjs" path="res://shopping/display_money.tscn" id="16_28jgm"]
[ext_resource type="PackedScene" uid="uid://bworkwhvc0mcv" path="res://wizard/inventory/inventory.tscn" id="17_guamx"]
[ext_resource type="PackedScene" uid="uid://b8vvwlraynlk7" path="res://ui/mixing.tscn" id="18_vpyft"]
[ext_resource type="PackedScene" uid="uid://dibl3hw88xbdh" path="res://ui/heal_window.tscn" id="19_qmunw"]
[ext_resource type="Texture2D" uid="uid://i1hwxo0kun40" path="res://ui/heal_btn.png" id="20_nmdkg"]
[ext_resource type="Texture2D" uid="uid://c8ewn13w3edbo" path="res://ui/heal_pressed.png" id="21_gltel"]
[ext_resource type="AudioStream" uid="uid://ovv271nxqgpj" path="res://wizard/dio-time-stop.mp3" id="22_nmk67"]
[ext_resource type="PackedScene" uid="uid://bi22hwrsfppr5" path="res://ui/dialog/dialogs.tscn" id="23_rirgm"]
[ext_resource type="PackedScene" uid="uid://bjsj1mwug051v" path="res://ui/controls/joystick.tscn" id="24_qwttk"]
[ext_resource type="Texture2D" uid="uid://da22qlgp6rrdk" path="res://ui/UI(1)/ui_button_joystick.png" id="25_rdp37"]

[sub_resource type="CircleShape2D" id="CircleShape2D_u7l0b"]

[sub_resource type="LabelSettings" id="LabelSettings_oosx8"]
font = ExtResource("5_goa6t")
font_size = 84

[sub_resource type="AtlasTexture" id="AtlasTexture_5hs6f"]
atlas = ExtResource("10_1uikj")
region = Rect2(0, 0, 49, 79)

[sub_resource type="AtlasTexture" id="AtlasTexture_6o8v2"]
atlas = ExtResource("10_1uikj")
region = Rect2(49, 0, 49, 79)

[sub_resource type="AtlasTexture" id="AtlasTexture_1war5"]
atlas = ExtResource("10_1uikj")
region = Rect2(98, 0, 49, 79)

[sub_resource type="AtlasTexture" id="AtlasTexture_mpf5k"]
atlas = ExtResource("10_1uikj")
region = Rect2(147, 0, 49, 79)

[sub_resource type="AtlasTexture" id="AtlasTexture_4xwoc"]
atlas = ExtResource("10_1uikj")
region = Rect2(196, 0, 49, 79)

[sub_resource type="AtlasTexture" id="AtlasTexture_q4x52"]
atlas = ExtResource("10_1uikj")
region = Rect2(245, 0, 49, 79)

[sub_resource type="AtlasTexture" id="AtlasTexture_ofeks"]
atlas = ExtResource("10_1uikj")
region = Rect2(294, 0, 49, 79)

[sub_resource type="SpriteFrames" id="SpriteFrames_tnmve"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_5hs6f")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6o8v2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1war5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_mpf5k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4xwoc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q4x52")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ofeks")
}],
"loop": true,
"name": &"default",
"speed": 1.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_ayxu2"]

[node name="Interface" type="CanvasLayer"]
process_mode = 3
follow_viewport_scale = 20.388

[node name="ProgressBars" type="Node" parent="."]

[node name="Stamina" parent="ProgressBars" instance=ExtResource("1_rm747")]
unique_name_in_owner = true
offset_left = 25.0
offset_top = 85.0
offset_right = 103.0
offset_bottom = 92.0
scale = Vector2(5, 5)

[node name="Health" parent="ProgressBars" instance=ExtResource("2_2t7gn")]
unique_name_in_owner = true
offset_left = 26.304
offset_top = 30.0
offset_right = 104.304
offset_bottom = 37.0
scale = Vector2(5, 5)

[node name="LevelProgress" parent="ProgressBars" instance=ExtResource("3_gtcda")]
unique_name_in_owner = true
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 29.0
offset_top = -181.0
offset_right = 70.0
offset_bottom = -174.0
grow_vertical = 2
scale = Vector2(5, 5)
size_flags_horizontal = 0

[node name="Boss_health" parent="ProgressBars" instance=ExtResource("4_i3j0c")]
unique_name_in_owner = true
visible = false

[node name="StageCompleted" type="RichTextLabel" parent="ProgressBars"]
unique_name_in_owner = true
clip_contents = false
anchors_preset = -1
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.636
offset_right = 1.0
offset_bottom = 3.87198
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 4
theme_override_fonts/normal_font = ExtResource("5_goa6t")
theme_override_font_sizes/normal_font_size = 36
bbcode_enabled = true
text = "[wave]STAGE COMPLETED[/wave]"
horizontal_alignment = 1
visible_characters = 0
visible_ratio = 0.0

[node name="TimeControl" type="Node" parent="."]

[node name="Saving" type="Control" parent="TimeControl"]
layout_mode = 3
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -814.0
offset_top = -197.0
offset_right = -814.0
offset_bottom = -197.0
grow_horizontal = 0
grow_vertical = 0
scale = Vector2(5, 5)

[node name="SaveButton" type="TouchScreenButton" parent="TimeControl/Saving"]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.580392)
position = Vector2(-12.6212, -6.14716)
scale = Vector2(1, 0.922)
texture_normal = ExtResource("6_js8hj")
texture_pressed = ExtResource("7_o5cqe")
shape = SubResource("CircleShape2D_u7l0b")
action = "time_save"

[node name="RestartUI" type="Control" parent="TimeControl"]
unique_name_in_owner = true
process_mode = 3
visible = false
modulate = Color(1, 1, 1, 0)
z_index = 6
layout_mode = 3
anchor_right = 2.066
anchor_bottom = 1.911
offset_right = -2380.03
offset_bottom = -1238.33

[node name="GameOver" type="Label" parent="TimeControl/RestartUI"]
layout_mode = 0
offset_left = 278.0
offset_top = 234.0
offset_right = 885.0
offset_bottom = 310.0
text = "Game Over"
label_settings = SubResource("LabelSettings_oosx8")

[node name="RestartButton" type="TouchScreenButton" parent="TimeControl/RestartUI"]
process_mode = 3
z_index = 9
position = Vector2(481, 341)
scale = Vector2(5.94104, 6.15733)
texture_normal = ExtResource("8_g8vcq")
texture_pressed = ExtResource("9_apw32")

[node name="Clock" type="AnimatedSprite2D" parent="TimeControl/RestartUI"]
position = Vector2(566, 91)
scale = Vector2(2.33484, 2.33484)
sprite_frames = SubResource("SpriteFrames_tnmve")
frame_progress = 0.633901
speed_scale = 0.5
script = ExtResource("11_suxck")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="TimeControl/RestartUI/Clock"]
stream = ExtResource("12_q7sjo")

[node name="TimeStop" parent="TimeControl" instance=ExtResource("13_0potx")]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.635294)
position = Vector2(147, 286)
scale = Vector2(5, 5)
texture_normal = ExtResource("14_38x65")
texture_pressed = ExtResource("15_dywsh")
shape = SubResource("CircleShape2D_ayxu2")

[node name="MoneyUI" type="Node" parent="."]

[node name="Money" parent="MoneyUI" instance=ExtResource("16_28jgm")]
unique_name_in_owner = true
position = Vector2(1106, 84)
scale = Vector2(4, 4)

[node name="Magic" type="Node" parent="."]

[node name="InventoryUI" parent="Magic" instance=ExtResource("17_guamx")]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.635294)
offset_left = 5.0
offset_top = 3.0
offset_right = 5.0
offset_bottom = 3.0
size_flags_horizontal = 4
size_flags_vertical = 8

[node name="Mixing" parent="Magic" instance=ExtResource("18_vpyft")]
offset_left = 411.0
offset_top = 581.0
offset_right = 747.0
offset_bottom = 621.0

[node name="Support" type="Node" parent="."]

[node name="Heal_window" parent="Support" instance=ExtResource("19_qmunw")]
unique_name_in_owner = true
visible = false
offset_left = -1.0
offset_top = -4.0
offset_right = -1.0
offset_bottom = -4.0

[node name="Heal" type="TextureButton" parent="Support"]
offset_left = 321.0
offset_top = 109.0
offset_right = 363.0
offset_bottom = 168.0
scale = Vector2(2.64454, 1.88754)
texture_normal = ExtResource("20_nmdkg")
texture_pressed = ExtResource("21_gltel")
stretch_mode = 0

[node name="Timers&sound" type="Node" parent="."]

[node name="TimeStopSound" type="AudioStreamPlayer" parent="Timers&sound"]
unique_name_in_owner = true
stream = ExtResource("22_nmk67")
bus = &"SFX"

[node name="Stamina_timer" type="Timer" parent="Timers&sound"]
unique_name_in_owner = true
wait_time = 0.5

[node name="Cooldown_timer" type="Timer" parent="Timers&sound"]
unique_name_in_owner = true
one_shot = true
autostart = true

[node name="Dialogs" parent="." instance=ExtResource("23_rirgm")]
unique_name_in_owner = true
visible = false
offset_left = -123.0
offset_top = -9.0
offset_right = -123.0
offset_bottom = -9.0
scale = Vector2(1.3, 1.3)

[node name="Joysticks" type="Node" parent="."]

[node name="Joystick" parent="Joysticks" instance=ExtResource("24_qwttk")]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.713726)
position = Vector2(158, 496)
scale = Vector2(4, 4)

[node name="Stick" type="TextureRect" parent="Joysticks/Joystick"]
offset_left = -10.8333
offset_top = -10.3333
offset_right = 11.1667
offset_bottom = 11.6667
texture = ExtResource("25_rdp37")

[node name="SpellJoystick" parent="Joysticks" instance=ExtResource("24_qwttk")]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.713726)
position = Vector2(1012, 504)
scale = Vector2(4, 4)

[node name="Stick" type="TextureRect" parent="Joysticks/SpellJoystick"]
offset_left = -12.1667
offset_top = -11.0
offset_right = 9.83333
offset_bottom = 11.0
texture = ExtResource("25_rdp37")

[connection signal="pressed" from="TimeControl/RestartUI/RestartButton" to="TimeControl/RestartUI/Clock" method="_on_restart_button_pressed"]
[connection signal="frame_changed" from="TimeControl/RestartUI/Clock" to="TimeControl/RestartUI/Clock" method="_on_frame_changed"]
