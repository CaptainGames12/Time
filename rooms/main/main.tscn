[gd_scene load_steps=70 format=3 uid="uid://dcifbpe8tn1uf"]

[ext_resource type="Script" uid="uid://cpfmollh1xmdd" path="res://rooms/main/main.gd" id="1_4ufej"]
[ext_resource type="PackedScene" uid="uid://dwi7bdg27wpbr" path="res://Wizard/Wizard.tscn" id="1_28m1h"]
[ext_resource type="AudioStream" uid="uid://cje471liap8dj" path="res://shopping/coin.wav" id="2_chvbv"]
[ext_resource type="AudioStream" uid="uid://ovv271nxqgpj" path="res://Wizard/dio-time-stop.mp3" id="3_2iv3q"]
[ext_resource type="PackedScene" uid="uid://7kfpfr1fhuh5" path="res://Wizard/player_ui/control.tscn" id="3_bkj6u"]
[ext_resource type="Script" uid="uid://bvgi5hq7cq5gn" path="res://Wizard/camera_2d.gd" id="3_tm1hv"]
[ext_resource type="PackedScene" uid="uid://dmrk7fnn3wb0j" path="res://Wizard/player_ui/Healthbar.tscn" id="5_0dchd"]
[ext_resource type="AudioStream" uid="uid://ci32m60f4qgqj" path="res://Wizard/fx_walk_grass.mp3" id="5_q87bq"]
[ext_resource type="FontFile" uid="uid://bpp82k7v8e671" path="res://shopping/PixelatedEleganceRegular-ovyAA.ttf" id="6_qmpgk"]
[ext_resource type="Texture2D" uid="uid://fdk7shr11eou" path="res://rooms/main/location.png" id="7_wewfl"]
[ext_resource type="PackedScene" uid="uid://bworkwhvc0mcv" path="res://Wizard/inventory/inventory.tscn" id="8_lflfe"]
[ext_resource type="Texture2D" uid="uid://bg3nv3eopgnhl" path="res://rooms/main/bars.png" id="10_m3omd"]
[ext_resource type="Texture2D" uid="uid://boevfpikbod4w" path="res://ui/UI(1)/button_5.png" id="11_4k2ai"]
[ext_resource type="Texture2D" uid="uid://b7tkddthyqmt0" path="res://ui/dark_button_version/button_5_dark.png" id="12_m3omd"]
[ext_resource type="Texture2D" uid="uid://c4orudbmrsqhl" path="res://rooms/main/fence.png" id="12_o4joc"]
[ext_resource type="PackedScene" uid="uid://dfetviixmo6rp" path="res://rooms/main/treasure.tscn" id="13_st04a"]
[ext_resource type="Texture2D" uid="uid://cg7s1u7cv6s10" path="res://rooms/main/box.png" id="13_u7l0b"]
[ext_resource type="PackedScene" uid="uid://cbvctbxxv3rvi" path="res://Enemies/boss/boss_health.tscn" id="13_v24id"]
[ext_resource type="PackedScene" uid="uid://byyvwanp7uc17" path="res://rooms/main/level_progress.tscn" id="14_v2j20"]
[ext_resource type="PackedScene" uid="uid://c5hxob0bgx8yb" path="res://rooms/main/tree.tscn" id="15_qea0l"]
[ext_resource type="PackedScene" uid="uid://xd5fsmhf0pj7" path="res://ui/time_stop_btn.tscn" id="16_0bf1a"]
[ext_resource type="Texture2D" uid="uid://bex85l0n7gfvt" path="res://ui/normal_restart.png" id="17_2h7oy"]
[ext_resource type="PackedScene" uid="uid://bjsj1mwug051v" path="res://ui/controls/joystick.tscn" id="17_4k2ai"]
[ext_resource type="PackedScene" uid="uid://bi22hwrsfppr5" path="res://ui/dialog/dialogs.tscn" id="17_tm1hv"]
[ext_resource type="PackedScene" uid="uid://dx6ah8cjdrku2" path="res://rooms/main/shadow.tscn" id="17_w8gtq"]
[ext_resource type="Texture2D" uid="uid://clwqfbsh7uifu" path="res://ui/UI(1)/button_4.png" id="17_wewfl"]
[ext_resource type="Texture2D" uid="uid://b50rpcijpbgyp" path="res://ui/pressed_restart.png" id="18_bjhwx"]
[ext_resource type="Texture2D" uid="uid://4q1uxalbnk7b" path="res://ui/dark_button_version/button_4_dark.png" id="18_o4joc"]
[ext_resource type="Script" path="res://rooms/main/scene_changer_main.gd" id="19_4j2le"]
[ext_resource type="Texture2D" uid="uid://da22qlgp6rrdk" path="res://ui/UI(1)/ui_button_joystick.png" id="20_0bf1a"]
[ext_resource type="PackedScene" uid="uid://dj3g4s7hfeffe" path="res://rooms/shop/shop.tscn" id="20_h78s4"]
[ext_resource type="Texture2D" uid="uid://i1hwxo0kun40" path="res://ui/heal_btn.png" id="20_o4joc"]
[ext_resource type="Texture2D" uid="uid://c8ewn13w3edbo" path="res://ui/heal_pressed.png" id="21_u7l0b"]
[ext_resource type="Texture2D" uid="uid://unkwqoaq77pb" path="res://ui/dark_circle.png" id="22_ayxu2"]
[ext_resource type="PackedScene" uid="uid://dibl3hw88xbdh" path="res://ui/heal_window.tscn" id="22_u7l0b"]
[ext_resource type="PackedScene" uid="uid://b8vvwlraynlk7" path="res://ui/mixing.tscn" id="25_m3omd"]
[ext_resource type="Texture2D" uid="uid://tlab731mbid2" path="res://Wizard/respawn clock.png" id="25_npqg4"]
[ext_resource type="Script" uid="uid://du3wrllvswb2p" path="res://Wizard/clock.gd" id="26_j4mwt"]
[ext_resource type="PackedScene" uid="uid://bu4x1lrdy0xjs" path="res://shopping/display_money.tscn" id="26_wewfl"]
[ext_resource type="Texture2D" uid="uid://cku3te15am1s" path="res://Wizard/arrow.png" id="27_q87bq"]
[ext_resource type="AudioStream" uid="uid://soev4p3d33nf" path="res://Wizard/tick.mp3" id="28_j4mwt"]
[ext_resource type="AudioStream" uid="uid://c2ch4bxq7gjp1" path="res://rooms/main/main_theme.mp3" id="29_tm1hv"]
[ext_resource type="Shader" uid="uid://ce7iw88ohe0gi" path="res://rooms/main/main.gdshader" id="36_wewfl"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_xu4os"]
vertices = PackedVector2Array(739.117, 621.438, 1143.3, 650.25, 9.78906, 646.344, 678.461, 621.438, 371.391, 617.703, 310.727, 617.703, 1023.85, 418.297, 1005.74, 418.297, 880.961, 388.977, 873.898, 332.547, 1008.77, 342.289, 1001.71, 285.859, 1143.3, 22.7578, 1033.33, 437.273, 972.461, 206.289, 965.398, 149.859, 992.227, 266.891, 529.688, 476.773, 518.25, 488.211, 137.352, 482.383, 130.289, 425.953, 911.797, 206.289, 974.117, 266.891, 962.68, 278.328, 151.867, 267.867, 144.812, 211.438, 979.727, 493.703, 1040.39, 493.703, 732.062, 565.008, 994.297, 429.742, 277.742, 362.812, 270.68, 306.383, 834.867, 325.023, 829.18, 353.438, 820.297, 388.977, 722.578, 546.039, 547.797, 476.773, 956.992, 306.75, 864.422, 313.578, 846.312, 313.578, 261.203, 287.406, 512.562, 516.633, 503.68, 552.172, 354.852, 542.297, 955.922, 130.891, 14.6016, 28.6328, 937.812, 130.891, 926.367, 142.328, 564.344, 552.172, 557.281, 495.742, 693.031, 557.477, 687.344, 585.898, 920.68, 170.75, 135.328, 192.469, 364.328, 561.273, 988.609, 458.156, 319.609, 582.156, 76.6875, 482.383, 325.297, 553.742, 704.469, 546.039, 336.742, 542.297, 85.5703, 446.844, 91.2578, 418.422, 102.703, 406.977, 120.812, 406.977, 91.2109, 267.867, 117.219, 192.469, 105.781, 203.906, 217.078, 362.812, 100.094, 232.328, 231.648, 298.852, 243.094, 287.406, 948.109, 342.289, 225.961, 327.273)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(4, 3, 2, 5), PackedInt32Array(6, 7, 8, 9), PackedInt32Array(10, 11, 12, 1, 13, 6), PackedInt32Array(14, 15, 12, 11, 16), PackedInt32Array(17, 18, 19, 20), PackedInt32Array(21, 14, 22, 23, 24, 25), PackedInt32Array(26, 27, 1, 0, 28), PackedInt32Array(8, 7, 29), PackedInt32Array(14, 16, 22), PackedInt32Array(30, 31, 32, 33, 34, 35, 36), PackedInt32Array(24, 23, 37, 38, 39, 40), PackedInt32Array(19, 18, 41, 42, 43), PackedInt32Array(12, 15, 44), PackedInt32Array(45, 12, 44, 46), PackedInt32Array(45, 46, 47), PackedInt32Array(48, 49, 50, 51, 3), PackedInt32Array(45, 47, 52, 21, 53), PackedInt32Array(42, 48, 3, 4, 54), PackedInt32Array(8, 29, 55, 26, 28, 35, 34), PackedInt32Array(56, 5, 2, 57, 19, 58), PackedInt32Array(59, 50, 49, 36), PackedInt32Array(42, 54, 43), PackedInt32Array(19, 43, 60), PackedInt32Array(19, 60, 58), PackedInt32Array(61, 57, 2, 45, 62), PackedInt32Array(63, 62, 45), PackedInt32Array(64, 63, 45, 65), PackedInt32Array(21, 25, 53), PackedInt32Array(45, 53, 66), PackedInt32Array(45, 66, 67), PackedInt32Array(32, 31, 40, 39), PackedInt32Array(17, 20, 64, 68, 30, 36), PackedInt32Array(45, 67, 69, 65), PackedInt32Array(70, 64, 65, 24, 71), PackedInt32Array(6, 9, 38, 72), PackedInt32Array(1, 27, 13), PackedInt32Array(72, 10, 6), PackedInt32Array(37, 72, 38), PackedInt32Array(24, 40, 71), PackedInt32Array(64, 70, 73, 68), PackedInt32Array(36, 35, 59)])
outlines = Array[PackedVector2Array]([PackedVector2Array(1156, 10, 1156, 663, -3, 659, 2, 16)])
agent_radius = 12.7

[sub_resource type="AtlasTexture" id="AtlasTexture_wewfl"]
atlas = ExtResource("10_m3omd")
region = Rect2(0, 0, 30, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_o4joc"]
atlas = ExtResource("10_m3omd")
region = Rect2(30, 0, 30, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_u7l0b"]
atlas = ExtResource("10_m3omd")
region = Rect2(60, 0, 30, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_ayxu2"]
atlas = ExtResource("10_m3omd")
region = Rect2(90, 0, 30, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_bgttg"]
atlas = ExtResource("10_m3omd")
region = Rect2(120, 0, 30, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_npqg4"]
atlas = ExtResource("10_m3omd")
region = Rect2(150, 0, 30, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_j4mwt"]
atlas = ExtResource("10_m3omd")
region = Rect2(150, 0, 30, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_q87bq"]
atlas = ExtResource("10_m3omd")
region = Rect2(120, 0, 30, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_ehthk"]
atlas = ExtResource("10_m3omd")
region = Rect2(90, 0, 30, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_qw8mo"]
atlas = ExtResource("10_m3omd")
region = Rect2(60, 0, 30, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_q3srb"]
atlas = ExtResource("10_m3omd")
region = Rect2(30, 0, 30, 27)

[sub_resource type="AtlasTexture" id="AtlasTexture_51h7d"]
atlas = ExtResource("10_m3omd")
region = Rect2(0, 0, 30, 27)

[sub_resource type="SpriteFrames" id="SpriteFrames_wewfl"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_wewfl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o4joc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u7l0b")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ayxu2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bgttg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_npqg4")
}],
"loop": false,
"name": &"close",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_j4mwt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q87bq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ehthk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qw8mo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q3srb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_51h7d")
}],
"loop": false,
"name": &"open",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_aatvm"]
size = Vector2(194, 43.4649)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ndgev"]
size = Vector2(46.3333, 16.25)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ayxu2"]
size = Vector2(20, 17.5)

[sub_resource type="CanvasTexture" id="CanvasTexture_xescj"]

[sub_resource type="Animation" id="Animation_23j7k"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Treasure:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(575, 309)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Treasure_shadow:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}

[sub_resource type="Animation" id="Animation_v2j20"]
resource_name = "crystal"
length = 2.0
loop_mode = 1
step = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Treasure:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.02, 2.02),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(1174.73, 557), Vector2(1175, 549), Vector2(900, 500)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Treasure_shadow:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.98, 2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0.8, 0.8), Vector2(0.679998, 0.733553), Vector2(0.8, 0.8)]
}

[sub_resource type="Animation" id="Animation_jgkow"]
resource_name = "ending"
length = 3.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 1.98, 3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(0.458405, 0.458405, 0.458405, 1), Color(0.122252, 0.122252, 0.122252, 1), Color(0, 0, 0, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_pbnns"]
_data = {
&"RESET": SubResource("Animation_23j7k"),
&"crystal": SubResource("Animation_v2j20"),
&"ending": SubResource("Animation_jgkow")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_u7l0b"]

[sub_resource type="LabelSettings" id="LabelSettings_oosx8"]
font = ExtResource("6_qmpgk")
font_size = 84

[sub_resource type="CircleShape2D" id="CircleShape2D_ayxu2"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wewfl"]
shader = ExtResource("36_wewfl")
shader_parameter/intensity = 0.7

[node name="Node2D" type="Node2D" groups=["level"]]
process_mode = 1
y_sort_enabled = true
script = ExtResource("1_4ufej")

[node name="Camera2D" type="Camera2D" parent="."]
process_mode = 3
position = Vector2(586, 393)
scale = Vector2(17.7849, 472.044)
limit_left = 0
limit_top = 0
limit_right = 2380
limit_bottom = 1250
limit_smoothed = true
position_smoothing_enabled = true
drag_horizontal_enabled = true
drag_vertical_enabled = true
drag_left_margin = 0.1
drag_top_margin = 0.1
drag_right_margin = 0.1
drag_bottom_margin = 0.1
editor_draw_limits = true
editor_draw_drag_margin = true
script = ExtResource("3_tm1hv")

[node name="Player" parent="." groups=["player"] instance=ExtResource("1_28m1h")]
position = Vector2(582, 449)
scale = Vector2(0.991811, 1)
collision_layer = 1

[node name="Collect_coin" type="AudioStreamPlayer2D" parent="Player"]
stream = ExtResource("2_chvbv")

[node name="RemoteTransform2D" type="RemoteTransform2D" parent="Player"]
position = Vector2(4.03308, -56)
scale = Vector2(17.9317, 472.044)
remote_path = NodePath("../../Camera2D")

[node name="Steps" type="AudioStreamPlayer2D" parent="Player"]
unique_name_in_owner = true
stream = ExtResource("5_q87bq")
volume_db = 9.63
pitch_scale = 0.7
autoplay = true
max_polyphony = 2

[node name="Treasure_shadow" parent="." instance=ExtResource("17_w8gtq")]
y_sort_enabled = false
position = Vector2(1171, 545)
offset = Vector2(0, 100)

[node name="Treasure" parent="." instance=ExtResource("13_st04a")]
unique_name_in_owner = true
position = Vector2(575, 309)
scale = Vector2(4, 4)

[node name="Entrances" type="Node2D" parent="."]
position = Vector2(545, 152)

[node name="any" type="Marker2D" parent="Entrances"]
position = Vector2(646, 280)

[node name="Forest" type="Sprite2D" parent="."]
position = Vector2(1, 1)
scale = Vector2(5, 5)
texture = ExtResource("7_wewfl")
centered = false

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
y_sort_enabled = true
position = Vector2(7, -26)
scale = Vector2(2.0656, 1.94869)
navigation_polygon = SubResource("NavigationPolygon_xu4os")

[node name="Tree" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(979.378, 334.584)
scale = Vector2(5, 5)

[node name="Tree3" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(851.57, 381.282)
scale = Vector2(5, 5)

[node name="Tree4" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(943.069, 198.595)
scale = Vector2(5, 5)

[node name="Tree2" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(342, 610)
scale = Vector2(5, 5)

[node name="Tree5" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(107.959, 474.678)
scale = Vector2(5, 5)

[node name="Tree6" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(1011, 486)
scale = Vector2(5, 5)

[node name="Tree7" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(709.723, 613.746)
scale = Vector2(5, 5)

[node name="Tree8" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(122.483, 260.175)
scale = Vector2(5, 5)

[node name="Tree9" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(534.955, 544.469)
scale = Vector2(5, 5)

[node name="Tree10" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(248.354, 355.111)
scale = Vector2(5, 5)

[node name="MainMusic" type="AudioStreamPlayer" parent="."]
unique_name_in_owner = true
stream = ExtResource("29_tm1hv")
autoplay = true

[node name="SpawnHolder" type="Node2D" parent="."]

[node name="Spawner" type="Node2D" parent="SpawnHolder"]
position = Vector2(1191, 1280)

[node name="Spawner2" type="Node2D" parent="SpawnHolder"]
position = Vector2(2434, 565)

[node name="Spawner4" type="Node2D" parent="SpawnHolder"]
position = Vector2(-78, 596)

[node name="CooldownBetweenWaves" type="Timer" parent="."]
wait_time = 5.0
one_shot = true
autostart = true

[node name="Entrance_shop" type="StaticBody2D" parent="."]
process_mode = 3
y_sort_enabled = true
position = Vector2(1198, 293)
scale = Vector2(3, 4)
collision_layer = 9

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Entrance_shop"]
position = Vector2(-0.415588, -16.8228)
scale = Vector2(1.17118, 0.73971)
build_mode = 1
polygon = PackedVector2Array(77.7696, -60.3983, -74.4984, -60.3983, -75.0677, 44.3725, -22.4142, 46.4003, -22.9835, 3.14015, 21.4162, 3.81609, 21.7008, 46.7383, 76.3466, 43.3586)

[node name="Entrance_anim" type="AnimatedSprite2D" parent="Entrance_shop"]
position = Vector2(-1.16667, -1.44111)
scale = Vector2(1.7, -0.837696)
sprite_frames = SubResource("SpriteFrames_wewfl")
animation = &"open"

[node name="SceneChanger" type="Area2D" parent="Entrance_shop"]
process_mode = 3
position = Vector2(-7.66668, -37)
scale = Vector2(1.12225, 0.365714)
script = ExtResource("19_4j2le")
scene = "shop"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Entrance_shop/SceneChanger"]
process_mode = 3
position = Vector2(6, 88.2324)
scale = Vector2(0.2, 1)
shape = SubResource("RectangleShape2D_aatvm")

[node name="Closed" type="StaticBody2D" parent="Entrance_shop"]
process_mode = 3
disable_mode = 1
collision_layer = 32

[node name="ClosedCollision" type="CollisionShape2D" parent="Entrance_shop/Closed"]
process_mode = 3
position = Vector2(-0.166656, 2.625)
shape = SubResource("RectangleShape2D_ndgev")

[node name="Fence" type="Sprite2D" parent="Entrance_shop"]
position = Vector2(-133, 6.75)
scale = Vector2(1.88277, 1)
texture = ExtResource("12_o4joc")

[node name="StaticBody2D" type="StaticBody2D" parent="Entrance_shop"]
y_sort_enabled = true
collision_layer = 8
collision_mask = 0

[node name="Box2" type="Sprite2D" parent="Entrance_shop/StaticBody2D"]
position = Vector2(-128.333, 0.25)
scale = Vector2(1.28, 1)
texture = ExtResource("13_u7l0b")

[node name="Box4" type="Sprite2D" parent="Entrance_shop/StaticBody2D"]
position = Vector2(-142, -5.5)
scale = Vector2(1.28, 1)
texture = ExtResource("13_u7l0b")

[node name="Box3" type="Sprite2D" parent="Entrance_shop/StaticBody2D"]
position = Vector2(-115.667, -12.25)
scale = Vector2(1.28, 1)
texture = ExtResource("13_u7l0b")

[node name="Box" type="Sprite2D" parent="Entrance_shop/StaticBody2D"]
position = Vector2(-102.667, 0.5)
scale = Vector2(1.28, 1)
texture = ExtResource("13_u7l0b")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Entrance_shop/StaticBody2D"]
position = Vector2(-128, 0.25)
shape = SubResource("RectangleShape2D_ayxu2")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Entrance_shop/StaticBody2D"]
position = Vector2(-142, -4.5)
shape = SubResource("RectangleShape2D_ayxu2")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Entrance_shop/StaticBody2D"]
position = Vector2(-115.333, -10.75)
shape = SubResource("RectangleShape2D_ayxu2")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="Entrance_shop/StaticBody2D"]
position = Vector2(-103.333, 0.5)
shape = SubResource("RectangleShape2D_ayxu2")

[node name="TextureRect" type="TextureRect" parent="."]
visible = false
modulate = Color(0, 0, 0, 1)
self_modulate = Color(0, 0, 0, 1)
z_index = 5
offset_right = 1154.0
offset_bottom = 654.0
texture = SubResource("CanvasTexture_xescj")

[node name="Barrier" type="StaticBody2D" parent="."]
position = Vector2(0, 33)
scale = Vector2(2, 1.8)
collision_layer = 8
collision_mask = 17

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Barrier"]
position = Vector2(29, 2)
polygon = PackedVector2Array(1212, 632, 1183, 667, 1167, 52, -25, 47, -30, 670, 1191, 671, 1159, 736, -71, 691, -90, -70, 522.552, -58.2955, 1204, -45)

[node name="Shop" parent="." instance=ExtResource("20_h78s4")]
unique_name_in_owner = true
z_index = -1
position = Vector2(10, -1317)
scale = Vector2(1.68507, 1.95292)

[node name="StopVec" type="RayCast2D" parent="."]
process_mode = 3
scale = Vector2(10, 1)
target_position = Vector2(0, 15)
collision_mask = 104

[node name="Main_animations" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_pbnns")
}
autoplay = "crystal"

[node name="Sprite2D" type="TextureRect" parent="."]
visible = false
z_index = 10
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = 1159.0
offset_top = 583.0
offset_right = 1223.0
offset_bottom = 647.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.636047, 0.636047)
pivot_offset = Vector2(32, 32)
texture = ExtResource("22_ayxu2")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
process_mode = 3
follow_viewport_scale = 20.388

[node name="ProgressBars" type="Node" parent="CanvasLayer"]

[node name="Stamina" parent="CanvasLayer/ProgressBars" instance=ExtResource("3_bkj6u")]
unique_name_in_owner = true
offset_left = 25.0
offset_top = 85.0
offset_right = 103.0
offset_bottom = 92.0
scale = Vector2(5, 5)

[node name="Health" parent="CanvasLayer/ProgressBars" instance=ExtResource("5_0dchd")]
unique_name_in_owner = true
offset_left = 26.304
offset_top = 30.0
offset_right = 104.304
offset_bottom = 37.0
scale = Vector2(5, 5)

[node name="LevelProgress" parent="CanvasLayer/ProgressBars" instance=ExtResource("14_v2j20")]
unique_name_in_owner = true
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 29.0
offset_top = -181.0
offset_right = 70.0
offset_bottom = -174.0
grow_vertical = 2
scale = Vector2(5, 5)
size_flags_horizontal = 0

[node name="Boss_health" parent="CanvasLayer/ProgressBars" instance=ExtResource("13_v24id")]
unique_name_in_owner = true
visible = false

[node name="StageCompleted" type="RichTextLabel" parent="CanvasLayer/ProgressBars"]
unique_name_in_owner = true
clip_contents = false
anchors_preset = -1
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.636
offset_right = 1.0
offset_bottom = 3.87198
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 4
theme_override_fonts/normal_font = ExtResource("6_qmpgk")
theme_override_font_sizes/normal_font_size = 36
bbcode_enabled = true
text = "[wave]STAGE COMPLETED[/wave]"
horizontal_alignment = 1
visible_characters = 0
visible_ratio = 0.0

[node name="TimeControl" type="Node" parent="CanvasLayer"]

[node name="Saving" type="Control" parent="CanvasLayer/TimeControl"]
layout_mode = 3
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -814.0
offset_top = -197.0
offset_right = -814.0
offset_bottom = -197.0
grow_horizontal = 0
grow_vertical = 0
scale = Vector2(5, 5)

[node name="SaveButton" type="TouchScreenButton" parent="CanvasLayer/TimeControl/Saving"]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.580392)
position = Vector2(-12.6212, -6.14716)
scale = Vector2(1, 0.922)
texture_normal = ExtResource("11_4k2ai")
texture_pressed = ExtResource("12_m3omd")
shape = SubResource("CircleShape2D_u7l0b")
action = "time_save"

[node name="RestartUI" type="Control" parent="CanvasLayer/TimeControl"]
unique_name_in_owner = true
process_mode = 3
visible = false
modulate = Color(1, 1, 1, 0)
z_index = 6
layout_mode = 3
anchor_right = 2.066
anchor_bottom = 1.911
offset_right = -2380.03
offset_bottom = -1238.33

[node name="GameOver" type="Label" parent="CanvasLayer/TimeControl/RestartUI"]
layout_mode = 0
offset_left = 278.0
offset_top = 234.0
offset_right = 885.0
offset_bottom = 310.0
text = "Game Over"
label_settings = SubResource("LabelSettings_oosx8")

[node name="RestartButton" type="TouchScreenButton" parent="CanvasLayer/TimeControl/RestartUI"]
process_mode = 3
z_index = 9
position = Vector2(481, 341)
scale = Vector2(5.94104, 6.15733)
texture_normal = ExtResource("17_2h7oy")
texture_pressed = ExtResource("18_bjhwx")

[node name="Clock" type="Sprite2D" parent="CanvasLayer/TimeControl/RestartUI"]
position = Vector2(568, 163)
scale = Vector2(4, 4)
texture = ExtResource("25_npqg4")
script = ExtResource("26_j4mwt")

[node name="arrow" type="Sprite2D" parent="CanvasLayer/TimeControl/RestartUI/Clock"]
position = Vector2(0, 3)
rotation = -0.0585369
texture = ExtResource("27_q87bq")
offset = Vector2(0.5, -3)

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="CanvasLayer/TimeControl/RestartUI/Clock"]
stream = ExtResource("28_j4mwt")

[node name="TimeStop" parent="CanvasLayer/TimeControl" instance=ExtResource("16_0bf1a")]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.635294)
position = Vector2(147, 286)
scale = Vector2(5, 5)
texture_normal = ExtResource("17_wewfl")
texture_pressed = ExtResource("18_o4joc")
shape = SubResource("CircleShape2D_ayxu2")

[node name="MoneyUI" type="Node" parent="CanvasLayer"]

[node name="Money" parent="CanvasLayer/MoneyUI" instance=ExtResource("26_wewfl")]
unique_name_in_owner = true
position = Vector2(1106, 84)
scale = Vector2(4, 4)

[node name="Magic" type="Node" parent="CanvasLayer"]

[node name="InventoryUI" parent="CanvasLayer/Magic" instance=ExtResource("8_lflfe")]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.635294)
offset_left = 5.0
offset_top = 3.0
offset_right = 5.0
offset_bottom = 3.0
size_flags_horizontal = 4
size_flags_vertical = 8

[node name="Mixing" parent="CanvasLayer/Magic" instance=ExtResource("25_m3omd")]
offset_left = 411.0
offset_top = 581.0
offset_right = 747.0
offset_bottom = 621.0

[node name="Support" type="Node" parent="CanvasLayer"]

[node name="Heal_window" parent="CanvasLayer/Support" instance=ExtResource("22_u7l0b")]
unique_name_in_owner = true
visible = false
offset_left = -1.0
offset_top = -4.0
offset_right = -1.0
offset_bottom = -4.0

[node name="Heal" type="TextureButton" parent="CanvasLayer/Support"]
offset_left = 321.0
offset_top = 109.0
offset_right = 363.0
offset_bottom = 168.0
scale = Vector2(2.64454, 1.88754)
texture_normal = ExtResource("20_o4joc")
texture_pressed = ExtResource("21_u7l0b")
stretch_mode = 0

[node name="Timers&sound" type="Node" parent="CanvasLayer"]

[node name="TimeStopSound" type="AudioStreamPlayer" parent="CanvasLayer/Timers&sound"]
unique_name_in_owner = true
stream = ExtResource("3_2iv3q")
volume_db = -12.181

[node name="Stamina_timer" type="Timer" parent="CanvasLayer/Timers&sound"]
unique_name_in_owner = true
wait_time = 0.5

[node name="Cooldown_timer" type="Timer" parent="CanvasLayer/Timers&sound"]
unique_name_in_owner = true
wait_time = 0.5
one_shot = true
autostart = true

[node name="Dialogs" parent="CanvasLayer" instance=ExtResource("17_tm1hv")]
unique_name_in_owner = true
visible = false
offset_left = -123.0
offset_top = -9.0
offset_right = -123.0
offset_bottom = -9.0
scale = Vector2(1.3, 1.3)

[node name="Joysticks" type="Node" parent="CanvasLayer"]

[node name="Joystick" parent="CanvasLayer/Joysticks" instance=ExtResource("17_4k2ai")]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.713726)
position = Vector2(158, 496)
scale = Vector2(4, 4)

[node name="Stick" type="TextureRect" parent="CanvasLayer/Joysticks/Joystick"]
offset_left = -10.8333
offset_top = -10.3333
offset_right = 11.1667
offset_bottom = 11.6667
texture = ExtResource("20_0bf1a")

[node name="SpellJoystick" parent="CanvasLayer/Joysticks" instance=ExtResource("17_4k2ai")]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.713726)
position = Vector2(1012, 504)
scale = Vector2(4, 4)

[node name="Stick" type="TextureRect" parent="CanvasLayer/Joysticks/SpellJoystick"]
offset_left = -12.1667
offset_top = -11.0
offset_right = 9.83333
offset_bottom = 11.0
texture = ExtResource("20_0bf1a")

[node name="ColorRect" type="ColorRect" parent="."]
visible = false
z_index = 3
material = SubResource("ShaderMaterial_wewfl")
offset_right = 1910.0
offset_bottom = 1094.0

[connection signal="timeout" from="CooldownBetweenWaves" to="." method="_on_cooldown_between_waves_timeout"]
[connection signal="body_entered" from="Entrance_shop/SceneChanger" to="Entrance_shop/SceneChanger" method="_on_body_entered"]
[connection signal="animation_finished" from="Main_animations" to="." method="_on_ending_animation_finished"]
[connection signal="pressed" from="CanvasLayer/TimeControl/RestartUI/RestartButton" to="." method="_on_restart_button_pressed"]
[connection signal="pressed" from="CanvasLayer/TimeControl/RestartUI/RestartButton" to="CanvasLayer/TimeControl/RestartUI/Clock" method="_on_restart_button_pressed"]
[connection signal="pressed" from="CanvasLayer/Support/Heal" to="." method="_on_button_pressed"]
[connection signal="timeout" from="CanvasLayer/Timers&sound/Stamina_timer" to="Player" method="_on_stamina_timer_timeout"]
[connection signal="timeout" from="CanvasLayer/Timers&sound/Cooldown_timer" to="Player" method="_on_cooldown_timer_timeout"]
