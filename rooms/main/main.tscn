[gd_scene load_steps=59 format=3 uid="uid://dcifbpe8tn1uf"]

[ext_resource type="Script" uid="uid://cpfmollh1xmdd" path="res://rooms/main/main.gd" id="1_4ufej"]
[ext_resource type="PackedScene" uid="uid://dwi7bdg27wpbr" path="res://Wizard/Wizard.tscn" id="1_28m1h"]
[ext_resource type="AudioStream" uid="uid://cje471liap8dj" path="res://shopping/coin.wav" id="2_chvbv"]
[ext_resource type="AudioStream" uid="uid://ovv271nxqgpj" path="res://Wizard/dio-time-stop.mp3" id="3_2iv3q"]
[ext_resource type="PackedScene" uid="uid://7kfpfr1fhuh5" path="res://Wizard/player_ui/control.tscn" id="3_bkj6u"]
[ext_resource type="Script" uid="uid://bvgi5hq7cq5gn" path="res://Wizard/camera_2d.gd" id="3_tm1hv"]
[ext_resource type="PackedScene" uid="uid://dmrk7fnn3wb0j" path="res://Wizard/player_ui/Healthbar.tscn" id="5_0dchd"]
[ext_resource type="FontFile" uid="uid://bpp82k7v8e671" path="res://shopping/PixelatedEleganceRegular-ovyAA.ttf" id="6_qmpgk"]
[ext_resource type="PackedScene" uid="uid://bworkwhvc0mcv" path="res://Wizard/inventory/inventory.tscn" id="8_lflfe"]
[ext_resource type="Texture2D" uid="uid://boevfpikbod4w" path="res://ui/UI(1)/button_5.png" id="11_4k2ai"]
[ext_resource type="Texture2D" uid="uid://b7tkddthyqmt0" path="res://ui/dark_button_version/button_5_dark.png" id="12_m3omd"]
[ext_resource type="PackedScene" uid="uid://dfetviixmo6rp" path="res://rooms/main/treasure.tscn" id="13_st04a"]
[ext_resource type="PackedScene" uid="uid://cbvctbxxv3rvi" path="res://Enemies/boss/boss_health.tscn" id="13_v24id"]
[ext_resource type="PackedScene" uid="uid://byyvwanp7uc17" path="res://rooms/main/level_progress.tscn" id="14_v2j20"]
[ext_resource type="PackedScene" uid="uid://c5hxob0bgx8yb" path="res://rooms/main/tree.tscn" id="15_qea0l"]
[ext_resource type="PackedScene" uid="uid://xd5fsmhf0pj7" path="res://ui/time_stop_btn.tscn" id="16_0bf1a"]
[ext_resource type="Texture2D" uid="uid://bex85l0n7gfvt" path="res://ui/normal_restart.png" id="17_2h7oy"]
[ext_resource type="PackedScene" uid="uid://bjsj1mwug051v" path="res://ui/controls/joystick.tscn" id="17_4k2ai"]
[ext_resource type="PackedScene" uid="uid://bi22hwrsfppr5" path="res://ui/dialog/dialogs.tscn" id="17_tm1hv"]
[ext_resource type="PackedScene" uid="uid://dx6ah8cjdrku2" path="res://rooms/main/shadow.tscn" id="17_w8gtq"]
[ext_resource type="Texture2D" uid="uid://clwqfbsh7uifu" path="res://ui/UI(1)/button_4.png" id="17_wewfl"]
[ext_resource type="Texture2D" uid="uid://b50rpcijpbgyp" path="res://ui/pressed_restart.png" id="18_bjhwx"]
[ext_resource type="Texture2D" uid="uid://4q1uxalbnk7b" path="res://ui/dark_button_version/button_4_dark.png" id="18_o4joc"]
[ext_resource type="Script" path="res://rooms/main/scene_changer_main.gd" id="19_4j2le"]
[ext_resource type="Texture2D" uid="uid://da22qlgp6rrdk" path="res://ui/UI(1)/ui_button_joystick.png" id="20_0bf1a"]
[ext_resource type="PackedScene" uid="uid://dj3g4s7hfeffe" path="res://rooms/shop/shop.tscn" id="20_h78s4"]
[ext_resource type="Texture2D" uid="uid://i1hwxo0kun40" path="res://ui/heal_btn.png" id="20_o4joc"]
[ext_resource type="Texture2D" uid="uid://c8ewn13w3edbo" path="res://ui/heal_pressed.png" id="21_u7l0b"]
[ext_resource type="PackedScene" uid="uid://dibl3hw88xbdh" path="res://ui/heal_window.tscn" id="22_u7l0b"]
[ext_resource type="PackedScene" uid="uid://b8vvwlraynlk7" path="res://ui/mixing.tscn" id="25_m3omd"]
[ext_resource type="PackedScene" uid="uid://bu4x1lrdy0xjs" path="res://shopping/display_money.tscn" id="26_wewfl"]
[ext_resource type="Texture2D" uid="uid://dqihn4rguc2al" path="res://rooms/main/locate.png" id="27_ayxu2"]
[ext_resource type="AudioStream" uid="uid://c2ch4bxq7gjp1" path="res://rooms/main/main_theme.mp3" id="29_tm1hv"]
[ext_resource type="Texture2D" uid="uid://bikoth7p3iqff" path="res://rooms/shop/iron_bar_v2.png" id="30_tm1hv"]
[ext_resource type="Texture2D" uid="uid://c1psrg47nignr" path="res://rooms/shop/iron_barrer.png" id="31_tm1hv"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_xu4os"]
vertices = PackedVector2Array(1143.3, 650.25, 825.148, 649.148, 837.383, 647.633, 713.406, 639.469, 746.367, 648.883, 397.578, 647.68, 1032.38, 344.633, 1143.3, 22.7578, 1047.7, 411.359, 741.297, 517.992, 741.297, 539.398, 712.703, 460.75, 645.297, 409.992, 491.383, 303.633, 462.703, 224.75, 711.406, 266.469, 769, 282.922, 712.703, 400.359, 1003.7, 265.75, 1003.7, 205.359, 1076.38, 550.633, 1010, 558.922, 952.406, 542.469, 808.703, 568.75, 808.703, 508.359, 311.297, 544.992, 311.297, 589.75, 290.367, 647.312, 217.383, 608.633, 188.703, 529.75, 188.703, 469.359, 9.78906, 646.344, 151, 616.922, 93.4062, 600.469, 121.297, 478.992, 121.297, 523.75, 14.6016, 28.6328, 100.406, 284.469, 936.297, 214.992, 936.297, 259.75, 908.406, 336.469, 835.383, 274.633, 806.703, 195.75, 806.703, 135.359, 675, 547.922, 741.297, 539.633, 741.297, 562.75, 617.406, 531.469, 378.703, 595.75, 378.703, 535.359, 980.297, 420.992, 980.297, 465.75, 739.297, 189.75, 462.703, 164.359, 739.297, 144.992, 224.383, 292.633, 395.297, 218.75, 367.406, 295.469, 395.297, 173.992, 195.703, 213.75, 195.703, 153.359, 645.297, 454.75, 425, 311.922, 128.297, 162.992, 128.297, 207.75, 158, 300.922, 966, 352.922, 1047.7, 471.75)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2), PackedInt32Array(3, 4, 5), PackedInt32Array(6, 7, 0, 8), PackedInt32Array(9, 10, 11), PackedInt32Array(12, 13, 14, 15, 16, 17), PackedInt32Array(7, 6, 18, 19), PackedInt32Array(20, 0, 2, 21), PackedInt32Array(22, 21, 2, 23, 24), PackedInt32Array(25, 26, 27, 28, 29, 30), PackedInt32Array(28, 27, 31, 32), PackedInt32Array(33, 32, 31), PackedInt32Array(34, 35, 33, 31, 36, 37), PackedInt32Array(38, 39, 40, 41, 42, 43), PackedInt32Array(44, 45, 46, 3, 5), PackedInt32Array(47, 44, 5, 48, 49), PackedInt32Array(40, 50, 51, 22, 24, 11, 17, 16, 41), PackedInt32Array(52, 15, 14, 53, 54), PackedInt32Array(24, 9, 11), PackedInt32Array(55, 56, 57, 30), PackedInt32Array(58, 56, 55, 59, 60), PackedInt32Array(12, 61, 47, 49, 57, 62), PackedInt32Array(7, 19, 38, 43), PackedInt32Array(36, 7, 43, 54, 53), PackedInt32Array(36, 53, 58, 60), PackedInt32Array(36, 60, 63), PackedInt32Array(36, 63, 64, 37), PackedInt32Array(34, 37, 65, 30), PackedInt32Array(30, 65, 55), PackedInt32Array(25, 30, 57, 49), PackedInt32Array(12, 62, 13), PackedInt32Array(50, 40, 66), PackedInt32Array(50, 66, 6, 8), PackedInt32Array(8, 0, 20, 67)])
outlines = Array[PackedVector2Array]([PackedVector2Array(1156, 10, 1156, 663, -3, 659, 2, 16)])
agent_radius = 12.7

[sub_resource type="AtlasTexture" id="AtlasTexture_4k2ai"]
atlas = ExtResource("30_tm1hv")
region = Rect2(0, 0, 15, 10)

[sub_resource type="AtlasTexture" id="AtlasTexture_m3omd"]
atlas = ExtResource("30_tm1hv")
region = Rect2(15, 0, 15, 10)

[sub_resource type="AtlasTexture" id="AtlasTexture_wewfl"]
atlas = ExtResource("30_tm1hv")
region = Rect2(30, 0, 15, 10)

[sub_resource type="AtlasTexture" id="AtlasTexture_o4joc"]
atlas = ExtResource("30_tm1hv")
region = Rect2(45, 0, 15, 10)

[sub_resource type="AtlasTexture" id="AtlasTexture_u7l0b"]
atlas = ExtResource("30_tm1hv")
region = Rect2(60, 0, 15, 10)

[sub_resource type="AtlasTexture" id="AtlasTexture_ayxu2"]
atlas = ExtResource("30_tm1hv")
region = Rect2(60, 0, 15, 10)

[sub_resource type="AtlasTexture" id="AtlasTexture_bgttg"]
atlas = ExtResource("30_tm1hv")
region = Rect2(45, 0, 15, 10)

[sub_resource type="AtlasTexture" id="AtlasTexture_npqg4"]
atlas = ExtResource("30_tm1hv")
region = Rect2(30, 0, 15, 10)

[sub_resource type="AtlasTexture" id="AtlasTexture_j4mwt"]
atlas = ExtResource("30_tm1hv")
region = Rect2(15, 0, 15, 10)

[sub_resource type="AtlasTexture" id="AtlasTexture_q87bq"]
atlas = ExtResource("30_tm1hv")
region = Rect2(0, 0, 15, 10)

[sub_resource type="AtlasTexture" id="AtlasTexture_ehthk"]
atlas = ExtResource("31_tm1hv")
region = Rect2(0, 31, 298, 31)

[sub_resource type="SpriteFrames" id="SpriteFrames_wewfl"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_4k2ai")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m3omd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wewfl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o4joc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u7l0b")
}],
"loop": false,
"name": &"close",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ayxu2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bgttg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_npqg4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j4mwt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q87bq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ehthk")
}],
"loop": false,
"name": &"open",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_aatvm"]
size = Vector2(194, 43.4649)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ndgev"]
size = Vector2(41.3333, 13.75)

[sub_resource type="CanvasTexture" id="CanvasTexture_xescj"]

[sub_resource type="Animation" id="Animation_23j7k"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Treasure:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(575, 309)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Treasure_shadow:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1, 1)]
}

[sub_resource type="Animation" id="Animation_v2j20"]
resource_name = "crystal"
length = 2.0
loop_mode = 1
step = 2.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Treasure:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.99, 2.02),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(900, 500), Vector2(900, 470), Vector2(900, 500)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Treasure_shadow:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.98, 2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(0.8, 0.8), Vector2(0.679998, 0.733553), Vector2(0.8, 0.8)]
}

[sub_resource type="Animation" id="Animation_jgkow"]
resource_name = "ending"
length = 3.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1, 1.98, 3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 1), Color(0.458405, 0.458405, 0.458405, 1), Color(0.122252, 0.122252, 0.122252, 1), Color(0, 0, 0, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_pbnns"]
_data = {
&"RESET": SubResource("Animation_23j7k"),
&"crystal": SubResource("Animation_v2j20"),
&"ending": SubResource("Animation_jgkow")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_u7l0b"]

[sub_resource type="LabelSettings" id="LabelSettings_oosx8"]
font = ExtResource("6_qmpgk")
font_size = 84

[sub_resource type="CircleShape2D" id="CircleShape2D_ayxu2"]

[node name="Node2D" type="Node2D" groups=["level"]]
process_mode = 1
y_sort_enabled = true
script = ExtResource("1_4ufej")

[node name="Player" parent="." groups=["player"] instance=ExtResource("1_28m1h")]
position = Vector2(582, 449)
scale = Vector2(0.991811, 1)
collision_layer = 1

[node name="Camera2D" type="Camera2D" parent="Player"]
position = Vector2(4.03302, -56)
scale = Vector2(17.9317, 472.044)
limit_left = 0
limit_top = 0
limit_right = 1920
limit_bottom = 1080
limit_smoothed = true
position_smoothing_enabled = true
drag_horizontal_enabled = true
drag_vertical_enabled = true
editor_draw_limits = true
editor_draw_drag_margin = true
script = ExtResource("3_tm1hv")

[node name="Collect_coin" type="AudioStreamPlayer2D" parent="Player"]
stream = ExtResource("2_chvbv")

[node name="Treasure_shadow" parent="." instance=ExtResource("17_w8gtq")]
position = Vector2(900, 561)

[node name="Treasure" parent="." instance=ExtResource("13_st04a")]
unique_name_in_owner = true
y_sort_enabled = true
position = Vector2(575, 309)
scale = Vector2(4, 4)

[node name="Entrances" type="Node2D" parent="."]
position = Vector2(545, 152)

[node name="any" type="Marker2D" parent="Entrances"]
position = Vector2(372, 72)

[node name="Forest" type="Sprite2D" parent="."]
position = Vector2(1, 1)
scale = Vector2(8, 8.532)
texture = ExtResource("27_ayxu2")
centered = false

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
y_sort_enabled = true
position = Vector2(7, -26)
scale = Vector2(1.64195, 1.5878)
navigation_polygon = SubResource("NavigationPolygon_xu4os")

[node name="Tree" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(967, 280)
scale = Vector2(6, 6)

[node name="Tree4" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(770, 210)
scale = Vector2(6, 6)

[node name="Tree2" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(342, 610)
scale = Vector2(6, 6)

[node name="Tree5" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(152, 544)
scale = Vector2(6, 6)

[node name="Tree6" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(1011, 486)
scale = Vector2(6, 6)

[node name="Tree7" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(772, 583)
scale = Vector2(6, 6)

[node name="Tree8" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(159, 228)
scale = Vector2(6, 6)

[node name="Tree9" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(676, 475)
scale = Vector2(6, 6)

[node name="Tree10" parent="NavigationRegion2D" instance=ExtResource("15_qea0l")]
position = Vector2(426, 239)
scale = Vector2(6, 6)

[node name="MainMusic" type="AudioStreamPlayer2D" parent="."]
unique_name_in_owner = true
stream = ExtResource("29_tm1hv")
autoplay = true
parameters/looping = true

[node name="SpawnHolder" type="Node2D" parent="."]

[node name="Spawner" type="Node2D" parent="SpawnHolder"]
position = Vector2(862, 1026)

[node name="Spawner2" type="Node2D" parent="SpawnHolder"]
position = Vector2(1878, 580)

[node name="Spawner4" type="Node2D" parent="SpawnHolder"]
position = Vector2(48, 590)

[node name="CooldownBetweenWaves" type="Timer" parent="."]
wait_time = 5.0
one_shot = true
autostart = true

[node name="Entrance_shop" type="StaticBody2D" parent="."]
process_mode = 3
position = Vector2(909, 90)
scale = Vector2(3, 4)
collision_layer = 9

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Entrance_shop"]
position = Vector2(-0.415588, -16.8228)
scale = Vector2(1.17118, 0.73971)
build_mode = 1
polygon = PackedVector2Array(27.393, -0.915493, -24.1039, -3.29142, -26.1141, 35.9233, -13.5912, 35.9233, -7.8961, 9.14284, 13.7143, 12.0686, 16.5778, 35.5853, 29.6699, 35.5853)

[node name="Entrance_anim" type="AnimatedSprite2D" parent="Entrance_shop"]
position = Vector2(0.666641, 5)
scale = Vector2(2.58997, 2.11606)
sprite_frames = SubResource("SpriteFrames_wewfl")
animation = &"close"
frame = 4
frame_progress = 1.0

[node name="SceneChanger" type="Area2D" parent="Entrance_shop"]
process_mode = 3
position = Vector2(-1.24676, -25.9657)
scale = Vector2(0.415584, 0.365714)
script = ExtResource("19_4j2le")
scene = "shop"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Entrance_shop/SceneChanger"]
process_mode = 3
position = Vector2(6, 88.2324)
scale = Vector2(0.2, 1)
shape = SubResource("RectangleShape2D_aatvm")

[node name="Closed" type="StaticBody2D" parent="Entrance_shop"]
collision_layer = 32

[node name="ClosedCollision" type="CollisionShape2D" parent="Entrance_shop/Closed"]
position = Vector2(2.33333, 3.875)
shape = SubResource("RectangleShape2D_ndgev")

[node name="TextureRect" type="TextureRect" parent="."]
visible = false
modulate = Color(0, 0, 0, 1)
self_modulate = Color(0, 0, 0, 1)
z_index = 5
offset_right = 1154.0
offset_bottom = 654.0
texture = SubResource("CanvasTexture_xescj")

[node name="Barrier" type="StaticBody2D" parent="."]
position = Vector2(0, 33)
scale = Vector2(1.57641, 1.57641)
collision_layer = 8
collision_mask = 17

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Barrier"]
position = Vector2(29, 2)
polygon = PackedVector2Array(1212, 632, 1183, 667, 1167, 52, -25, 47, -30, 670, 1191, 671, 1159, 736, -71, 691, -90, -70, 522.552, -58.2955, 1204, -45)

[node name="Shop" parent="." instance=ExtResource("20_h78s4")]
unique_name_in_owner = true
z_index = -1
position = Vector2(30, -1199)
scale = Vector2(1.66065, 1.66065)

[node name="StopVec" type="RayCast2D" parent="."]
process_mode = 3
scale = Vector2(10, 1)
target_position = Vector2(0, 15)
collision_mask = 104

[node name="Main_animations" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_pbnns")
}
autoplay = "crystal"

[node name="CanvasLayer" type="CanvasLayer" parent="."]
process_mode = 3
follow_viewport_scale = 20.388

[node name="ProgressBars" type="Node" parent="CanvasLayer"]

[node name="Stamina" parent="CanvasLayer/ProgressBars" instance=ExtResource("3_bkj6u")]
unique_name_in_owner = true
offset_left = 25.0
offset_top = 85.0
offset_right = 103.0
offset_bottom = 92.0
scale = Vector2(5, 5)

[node name="Health" parent="CanvasLayer/ProgressBars" instance=ExtResource("5_0dchd")]
unique_name_in_owner = true
offset_left = 26.304
offset_top = 30.0
offset_right = 104.304
offset_bottom = 37.0
scale = Vector2(5, 5)

[node name="LevelProgress" parent="CanvasLayer/ProgressBars" instance=ExtResource("14_v2j20")]
unique_name_in_owner = true
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 29.0
offset_top = -181.0
offset_right = 70.0
offset_bottom = -174.0
grow_vertical = 2
scale = Vector2(5, 5)
size_flags_horizontal = 0

[node name="Boss_health" parent="CanvasLayer/ProgressBars" instance=ExtResource("13_v24id")]
unique_name_in_owner = true
visible = false

[node name="StageCompleted" type="RichTextLabel" parent="CanvasLayer/ProgressBars"]
unique_name_in_owner = true
clip_contents = false
anchors_preset = -1
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.636
offset_right = 1.0
offset_bottom = 3.87198
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 4
theme_override_fonts/normal_font = ExtResource("6_qmpgk")
theme_override_font_sizes/normal_font_size = 36
bbcode_enabled = true
text = "[wave]STAGE COMPLETED[/wave]"
horizontal_alignment = 1
visible_characters = 0
visible_ratio = 0.0

[node name="TimeControl" type="Node" parent="CanvasLayer"]

[node name="Saving" type="Control" parent="CanvasLayer/TimeControl"]
layout_mode = 3
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -814.0
offset_top = -197.0
offset_right = -814.0
offset_bottom = -197.0
grow_horizontal = 0
grow_vertical = 0
scale = Vector2(5, 5)

[node name="SaveButton" type="TouchScreenButton" parent="CanvasLayer/TimeControl/Saving"]
modulate = Color(1, 1, 1, 0.580392)
position = Vector2(-12.6212, -6.14716)
scale = Vector2(1, 0.922)
texture_normal = ExtResource("11_4k2ai")
texture_pressed = ExtResource("12_m3omd")
shape = SubResource("CircleShape2D_u7l0b")

[node name="RestartUI" type="Control" parent="CanvasLayer/TimeControl"]
unique_name_in_owner = true
process_mode = 3
visible = false
z_index = 6
layout_mode = 3
anchors_preset = 0

[node name="GameOver" type="Label" parent="CanvasLayer/TimeControl/RestartUI"]
layout_mode = 0
offset_left = 278.0
offset_top = 234.0
offset_right = 885.0
offset_bottom = 310.0
text = "Game Over"
label_settings = SubResource("LabelSettings_oosx8")

[node name="RestartButton" type="TouchScreenButton" parent="CanvasLayer/TimeControl/RestartUI"]
process_mode = 3
z_index = 9
position = Vector2(481, 341)
scale = Vector2(5.94104, 6.15733)
texture_normal = ExtResource("17_2h7oy")
texture_pressed = ExtResource("18_bjhwx")

[node name="TimeStop" parent="CanvasLayer/TimeControl" instance=ExtResource("16_0bf1a")]
modulate = Color(1, 1, 1, 0.635294)
position = Vector2(147, 286)
scale = Vector2(5, 5)
texture_normal = ExtResource("17_wewfl")
texture_pressed = ExtResource("18_o4joc")
shape = SubResource("CircleShape2D_ayxu2")

[node name="MoneyUI" type="Node" parent="CanvasLayer"]

[node name="Money" parent="CanvasLayer/MoneyUI" instance=ExtResource("26_wewfl")]
unique_name_in_owner = true
position = Vector2(1106, 84)
scale = Vector2(4, 4)

[node name="Magic" type="Node" parent="CanvasLayer"]

[node name="InventoryUI" parent="CanvasLayer/Magic" instance=ExtResource("8_lflfe")]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.635294)
offset_left = 5.0
offset_top = 3.0
offset_right = 5.0
offset_bottom = 3.0
size_flags_horizontal = 4
size_flags_vertical = 8

[node name="Mixing" parent="CanvasLayer/Magic" instance=ExtResource("25_m3omd")]
offset_left = 411.0
offset_top = 581.0
offset_right = 747.0
offset_bottom = 621.0

[node name="Support" type="Node" parent="CanvasLayer"]

[node name="Heal_window" parent="CanvasLayer/Support" instance=ExtResource("22_u7l0b")]
unique_name_in_owner = true
visible = false
offset_left = -1.0
offset_top = -4.0
offset_right = -1.0
offset_bottom = -4.0

[node name="Heal" type="TextureButton" parent="CanvasLayer/Support"]
offset_left = 321.0
offset_top = 109.0
offset_right = 363.0
offset_bottom = 168.0
scale = Vector2(2.64454, 1.88754)
texture_normal = ExtResource("20_o4joc")
texture_pressed = ExtResource("21_u7l0b")
stretch_mode = 0

[node name="Timers&sound" type="Node" parent="CanvasLayer"]

[node name="TimeStopSound" type="AudioStreamPlayer" parent="CanvasLayer/Timers&sound"]
unique_name_in_owner = true
stream = ExtResource("3_2iv3q")
volume_db = -12.181

[node name="Stamina_timer" type="Timer" parent="CanvasLayer/Timers&sound"]
unique_name_in_owner = true
wait_time = 0.5

[node name="Cooldown_timer" type="Timer" parent="CanvasLayer/Timers&sound"]
unique_name_in_owner = true
wait_time = 0.5
one_shot = true
autostart = true

[node name="Dialogs" parent="CanvasLayer" instance=ExtResource("17_tm1hv")]
unique_name_in_owner = true
visible = false
offset_left = -123.0
offset_top = -9.0
offset_right = -123.0
offset_bottom = -9.0
scale = Vector2(1.3, 1.3)

[node name="Joysticks" type="Node" parent="CanvasLayer"]

[node name="Joystick" parent="CanvasLayer/Joysticks" instance=ExtResource("17_4k2ai")]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.713726)
position = Vector2(158, 496)
scale = Vector2(4, 4)

[node name="Stick" type="TextureRect" parent="CanvasLayer/Joysticks/Joystick"]
offset_left = -10.8333
offset_top = -10.3333
offset_right = 11.1667
offset_bottom = 11.6667
texture = ExtResource("20_0bf1a")

[node name="SpellJoystick" parent="CanvasLayer/Joysticks" instance=ExtResource("17_4k2ai")]
unique_name_in_owner = true
modulate = Color(1, 1, 1, 0.713726)
position = Vector2(1012, 504)
scale = Vector2(4, 4)

[node name="Stick" type="TextureRect" parent="CanvasLayer/Joysticks/SpellJoystick"]
offset_left = -12.1667
offset_top = -11.0
offset_right = 9.83333
offset_bottom = 11.0
texture = ExtResource("20_0bf1a")

[connection signal="timeout" from="CooldownBetweenWaves" to="." method="_on_cooldown_between_waves_timeout"]
[connection signal="body_entered" from="Entrance_shop/SceneChanger" to="Entrance_shop/SceneChanger" method="_on_body_entered"]
[connection signal="animation_finished" from="Main_animations" to="." method="_on_ending_animation_finished"]
[connection signal="pressed" from="CanvasLayer/TimeControl/Saving/SaveButton" to="." method="_on_save_button_pressed"]
[connection signal="pressed" from="CanvasLayer/TimeControl/RestartUI/RestartButton" to="." method="_on_restart_button_pressed"]
[connection signal="pressed" from="CanvasLayer/TimeControl/TimeStop" to="Player" method="_on_time_stop_pressed"]
[connection signal="pressed" from="CanvasLayer/Support/Heal" to="." method="_on_button_pressed"]
[connection signal="timeout" from="CanvasLayer/Timers&sound/Stamina_timer" to="Player" method="_on_stamina_timer_timeout"]
[connection signal="timeout" from="CanvasLayer/Timers&sound/Cooldown_timer" to="Player" method="_on_cooldown_timer_timeout"]
